# WARNING - Generated by {fusen} from /dev/flat_compile_qmd_course.Rmd: do not edit by hand

# create temp dir
temp_dir <- tempfile(pattern = "template")
dir.create(temp_dir)

# copy qmd in tmp
nq1h_path <- system.file(package = "nq1h")

files_to_copy <- c(
  file.path(
    nq1h_path,
    c("_extensions",
      "courses",
      "_quarto.yaml",
      "_quarto-render.yml")
  )
)

file.copy(
  from = files_to_copy,
  to = temp_dir,
  recursive = TRUE
)

# render all course qmd in quarto project with default profile
# remove as_job to not run as background jobs
quarto::quarto_render(
  input = temp_dir,
  as_job = FALSE
)

# list created html
htmls <- list.files(
  path = temp_dir,
  pattern = "qmd[0-9]_for_test\\.html$",
  recursive = TRUE,
  full.names = TRUE
)
  
test_that("extract_html_slides returns all html slide classes in correct order", {
    
  # run function with slide order 1-2-3
  html_slide_content <- extract_html_slides(
    vec_html_path = htmls
    )
  
  #' @description test with three html files in order 1-2-3
  expect_snapshot(x = html_slide_content)
  
  # run function with slide order 2-1-3
  html_slide_content_reordered <- extract_html_slides(vec_html_path = htmls[c(2, 1, 3)])
  
  #' @description test with three htmls in order 2-1-3
  expect_snapshot(x = html_slide_content_reordered)

})

# clean up
unlink(temp_dir, recursive = TRUE)
