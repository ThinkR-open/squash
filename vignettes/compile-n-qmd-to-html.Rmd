---
title: "Compile n qmd to html"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{compile-n-qmd-to-html}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(nq1h)
```

<!-- WARNING - This vignette is generated by {fusen} from /dev/flat_compile_qmd_course.Rmd: do not edit by hand -->

## `compile_qmd_course()` : compile individual qmds into a combined html

```{r examples-compile_qmd_course}
# list example qmds
courses_path <- system.file(
  "courses",
  package = "nq1h"
)

qmds <- list.files(
  path = courses_path, 
  full.names = TRUE, 
  pattern = "qmd$"
)

# generate html in temp folder
temp_dir <- tempfile(pattern = "compile") 

compile_qmd_course(
  vec_qmd_path = qmds,
  output_dir = temp_dir
)

# clean up
unlink(temp_dir, recursive = TRUE)

#---- to refactor next

# template_qmd <- readLines(
#   system.file(
#     "template.qmd",
#     package = "nq1h"
#   )
# )
# 
# path_html_files <- list.files(
#   temp_dir, 
#   full.names = TRUE,
#   pattern = "\\.html$"
# )
# 
# divs_to_insert <- path_html_files |> 
#   lapply(
#     \(path_html_file) {
#       sprintf(
#         '<div data-external-replace="%s">  </div>',
#         path_html_file
#       )
#     }
#   ) |> 
#   paste(
#     collapse = "\n\n---\n\n"
#   )
# 
# index_qmd <- gsub(
#   pattern = "\\{\\{insert_divs\\}\\}",
#   replacement = divs_to_insert,
#   template_qmd
# ) 
# 
# writeLines(
#   index_qmd,
#   "index.qmd"
# )

```

