---
title: "Compile n qmd to html"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Compile n qmd to html}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r}
library(squash)
```

<!-- WARNING - This vignette is generated by {fusen} from dev/flat_compile_qmd_course.Rmd: do not edit by hand -->




## `compile_qmd_course()` : compile individual qmds into a combined html

```{r examples-compile_qmd_course}
library(future)

# set parallel rendering
plan(multisession, workers = 2)

# list example qmds
courses_path <- system.file(
  "courses",
  "M01",
  package = "squash"
)

# copy course tree in tmpdir, add quarto porject file
tmp_course_path <- tempfile(pattern = "course")
dir.create(tmp_course_path)
file.create(file.path(tmp_course_path, "_quarto.yaml"))

file.copy(
  from = courses_path,
  to = tmp_course_path,
  recursive = TRUE
)

qmds <- list.files(
  path = tmp_course_path,
  full.names = TRUE,
  recursive = TRUE,
  pattern = "qmd$"
)

# generate html in temp folder
temp_dir <- tempfile(pattern = "compile")

html_output <- compile_qmd_course(
  vec_qmd_path = qmds,
  output_dir = temp_dir,
  output_html = "complete_course.html"
)

# reset default rendering
plan("default")

# clean up
unlink(temp_dir, recursive = TRUE)
unlink(tmp_course_path, recursive = TRUE)
```




## `render_single_qmd()` : render a single qmd file to html with image folder

This compilation will use a quarto rendering profile to remove footer, logo and title background. They will be incorporated by the first and last slide template.

This compilation also generates a companion folder storing all the html images.
  
```{r example-render_single_qmd}
# create a temp dir with qmd
temp_dir <- tempfile(pattern = "render")

dir.create(
  path = file.path(temp_dir, "img"),
  recursive = TRUE
)

file.copy(
  from = system.file("courses", "M01", "M01S01", "C01-qmd1_for_test.qmd", package = "squash"),
  to = temp_dir
)

file.copy(
  from = system.file("courses", "M01", "M01S01", "img", "logo_1.png", package = "squash"),
  to = file.path(temp_dir, "img")
)

# render qmd
is_rendered <- render_single_qmd(
  qmd = file.path(temp_dir, "C01-qmd1_for_test.qmd"),
  img_root_dir = file.path(temp_dir, "image_folder")
)

# clean temp dir
unlink(temp_dir, recursive = TRUE)
```

  
  
