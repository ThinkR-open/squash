---
title: "Compile n qmd to html"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{compile-n-qmd-to-html}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(nq1h)
```

<!-- WARNING - This vignette is generated by {fusen} from /dev/flat_compile_qmd_course.Rmd: do not edit by hand -->

## `compile_qmd_course()` : compile individual qmds into a combined html

```{r examples-compile_qmd_course}
# list example qmds
courses_path <- system.file(
  "courses",
  package = "nq1h"
)

qmds <- list.files(
  path = courses_path,
  full.names = TRUE,
  recursive = TRUE,
  pattern = "qmd$"
)

# generate html in temp folder
temp_dir <- tempfile(pattern = "compile")

html_output <- compile_qmd_course(
  vec_qmd_path = qmds,
  output_dir = temp_dir,
  output_html = "complete_course.html"
)

# clean up
unlink(temp_dir, recursive = TRUE)
```

## `render_single_qmd()` : render a single qmd file to html with image folder

    

  

```{r example-render_single_qmd}
# create a temp dir with qmd
temp_dir <- tempfile(pattern = "render")

dir.create(
  path = file.path(temp_dir, "img"),
  recursive = TRUE
)

file.copy(
  from = system.file("courses", "C01", "qmd1_for_test.qmd", package = "nq1h"),
  to = temp_dir
)

file.copy(
  from = system.file("courses", "C01", "img", "logo_1.png", package = "nq1h"),
  to = file.path(temp_dir, "img")
)

# render qmd
is_rendered <- render_single_qmd(
  qmd = file.path(temp_dir, "qmd1_for_test.qmd"),
  img_root_dir = file.path(temp_dir, "image_folder")
    )

# clean temp dir
unlink(temp_dir, recursive = TRUE)
```

  

  


## `extract_html_slides()` : extract html each elements of slides from multiple html files

```{r example-extract_html_slides}
# list html files
courses_path <- system.file(
  "courses",
  package = "nq1h"
)

htmls <- list.files(
  path = courses_path,
  full.names = TRUE,
  recursive = TRUE,
  pattern = "html$"
)

html_slide_content <- extract_html_slides(vec_html_path = htmls)
```

## `create_template_html()` : create a template html with ThinkR styling

Use the quakr extension to render html.


  

```{r example-create_template_html}
# create temp dir
temp_dir <- tempfile(pattern = "template")

# create html template
path_to_html_template <- create_template_html(
  path_to_qmd = system.file("template.qmd", package = "nq1h"),
  output_dir = temp_dir,
  output_file = "complete_course.html"
)

# clean up
unlink(temp_dir, recursive = TRUE)
```

  

## `clean_rendering_files()` : cleanup course directory after rendering

Utility function to remove all the files and folders created when rendering a qmd. The files already present and updated will not be removed.
    

  

```{r example-clean_rendering_files}
# create a temp dir with qmd
temp_dir <- tempfile(pattern = "clean")

dir.create(
  path = file.path(temp_dir, "img"),
  recursive = TRUE
)

file.copy(
  from = system.file("courses", "C01", "qmd1_for_test.qmd", package = "nq1h"),
  to = temp_dir
)

file.copy(
  from = system.file("courses", "C01", "img", "logo_1.png", package = "nq1h"),
  to = file.path(temp_dir, "img")
)

# list files before rendering
file_and_dirs_before <- list.files(
  temp_dir,
  recursive = TRUE,
  full.names = TRUE,
  include.dirs = TRUE
)

# render qmd
quarto::quarto_render(
  input = file.path(temp_dir, "qmd1_for_test.qmd"),
  quiet = TRUE
)

# remove created files and dirs
clean_rendering_files(
  dir = temp_dir,
  present_before = file_and_dirs_before
)

# clean temp dir
unlink(temp_dir, recursive = TRUE)
```

  

